<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.goott.eco.mapper.DeliMapper">
	
	<select id="getOrderNum" resultType="Long">
		select seq_temp_orderNum.nextval from dual
	</select> 
	<insert id="addOrder">
		<!-- <selectKey keyProperty="seq_temp_orderNum" order="BEFORE" resultType="long">
			select seq_temp_orderNum.nextval from dual
		</selectKey> -->
		<!-- insert into eco.order_main values(#{orderNum},#{custId},default,default,#{custId},'','','','') -->
		<!-- insert into eco.order_detail values(orderNum,order_seq,seq_order_detail_seq.nextval,#{custId},1,default,#{custId},'','') -->
		insert all
		into eco.order_main values(#{orderNum},#{custId},default,default,#{custId},'','','','')
		into eco.order_detail values(#{orderNum},seq_order_detail_seq.nextval,#{custId},#{basketNum},default,#{custId},'','')
		SELECT * FROM dual
	</insert>

	
	
	<select id="getDeliOrderDetailNumList" resultType="List">
		 SELECT delidetail.order_detail_seq
   		 FROM eco.delivery_detail delidetail LEFT OUTER JOIN eco.delivery_main delimain
   		 ON delidetail.delivery_seq = delimain.delivery_seq
    	 WHERE delidetail.DELIVERY_seq=1;
	</select>

</mapper>